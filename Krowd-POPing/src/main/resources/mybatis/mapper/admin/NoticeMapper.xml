<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ohgiraffers.thymeleafspringboot.notice.model.dao.NoticeMapper">

    <resultMap id="NoticeResultMap" type="com.jellybears.krowdpoping.admin.model.dto.NoticeDTO">
        <id property="noticeCode" column="NOTICE_CODE"/>
        <result property="title" column="NOTICE_TITLE"/>
        <result property="content" column="NOTICE_CONTENT"/>
        <result property="updateDate" column="UPDATE_DATE"/>
        <result property="type" column="NOTICE_TYPE"/>
        <result property="adminUserCode" column="NOTICE_ADMIN_USER_CODE"/>
        <association property="userCode" resultMap="UserResultMap"/>
    </resultMap>

    <resultMap id="UserResultMap" type="com.jellybears.krowdpoping.user.model.dto.UserDTO">
        <id property="user_code" column="USER_CODE"/>
        <result property="id" column="USER_ID"/>
        <result property="password" column="USER_PASSWORD"/>
        <result property="name" column="USER_NAME"/>
        <result property="nickname" column="USER_NICKNAME"/>
        <result property="birthday" column="USER_BIRTHDAY"/>
        <result property="email" column="USER_EMAIL"/>
        <result property="phone_number" column="USER_PHONE_NUMBER"/>
        <result property="user_status" column="USER_STATUS"/>
        <result property="user_role" column="USER_ROLE"/>
    </resultMap>

    <select id="selectAllNoticeList" resultMap="NoticeResultMap">
        SELECT  A.NOTICE_CODE
                , A.NOTICE_TITLE
                , A.NOTICE_UPDATE_DATE
                , A.NOTICE_TYPE
                , A.NOTICE_ADMIN_USER_CODE
                , B.USER_NICKNAME
        FROM TBL_NOTICE A
        JOIN TBL_USER B ON (A.NOTICE_ADMIN_USER_CODE = B.USER_CODE)
        ORDER BY A.NOTICE_CODE DESC
    </select>

</mapper>